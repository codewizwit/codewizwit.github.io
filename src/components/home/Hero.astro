---
/**
 * Hero section: cream background, full viewport.
 * "No Human Left Behind." in Lora serif 5-6rem.
 * Rotated hot dog mark above. Subtitle + one CTA.
 * Everything static on load. Only the period is typed.
 */
import { taglines } from '../../data/messaging';
---

<section class="hero section-cream" aria-labelledby="hero-heading">
  <div class="hero-inner">
    <img
      src="/images/logo-final.png"
      alt=""
      class="hero-mark"
      width="80"
      height="55"
      loading="eager"
    />
    <p class="hero-label">Human-centered AI adoption</p>
    <h1 id="hero-heading" class="hero-heading">
      No Human Left Behind<span class="hero-period">.</span><span class="hero-cursor" aria-hidden="true"></span>
    </h1>
    <p class="hero-subtitle">
      {taglines.subtitle}
    </p>
  </div>
</section>

<style>
  .hero {
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: calc(100dvh - 8rem);
    text-align: center;
    padding-inline: var(--gutter);
  }

  .hero-inner {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0;
    max-width: 48rem;
  }

  .hero-mark {
    width: 70px;
    height: auto;
    transform: rotate(-12deg);
    opacity: 0.85;
    margin-bottom: var(--space-md);
  }

  .hero-label {
    font-size: var(--text-xs);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    color: var(--color-gold-dark);
    margin-bottom: var(--space-sm);
  }

  .hero-heading {
    font-family: var(--font-heading);
    font-size: var(--text-hero);
    font-weight: 700;
    line-height: 1.05;
    letter-spacing: -0.03em;
    color: var(--color-text);
    margin-bottom: var(--space-sm);
  }

  .hero-cursor {
    display: inline-block;
    width: 0.07em;
    height: 0.85em;
    background-color: var(--color-gold);
    margin-left: 0.35em;
    vertical-align: baseline;
    animation: cursor-blink 1.06s step-end infinite;
  }

  .hero-period {
    display: none;
  }

  .hero-period.typed {
    display: inline;
  }

  @keyframes cursor-blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
  }

  .hero-subtitle {
    font-size: var(--text-xl);
    color: var(--color-text-secondary);
    line-height: 1.4;
    max-width: 32rem;
    margin-bottom: var(--space-lg);
  }

  @media (prefers-reduced-motion: reduce) {
    .hero-period {
      display: inline;
    }

    .hero-cursor {
      display: none;
    }
  }
</style>

<script>
  const period = document.querySelector('.hero-period') as HTMLElement;
  const cursor = document.querySelector('.hero-cursor') as HTMLElement;

  if (period && cursor && !window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
    const sleep = (ms: number) => new Promise(r => setTimeout(r, ms));

    async function animate() {
      // Cursor is blinking two spaces after "d". Let the reader take it in.
      await sleep(2100);

      // First backspace
      cursor.style.transition = 'margin-left 0.12s ease';
      cursor.style.marginLeft = '0.15em';

      // Pause between keystrokes
      await sleep(180);

      // Second backspace
      cursor.style.marginLeft = '0';

      // Small beat, then the period appears
      await sleep(150);
      period.classList.add('typed');

      // One more blink cycle, then fade out
      await sleep(1060);
      cursor.style.animation = 'none';
      cursor.style.opacity = '1';
      // Force reflow so the transition applies
      cursor.offsetHeight;
      cursor.style.transition = 'opacity 0.6s ease';
      cursor.style.opacity = '0';
    }

    animate();
  }
</script>
